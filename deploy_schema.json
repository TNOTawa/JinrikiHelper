{
"$schema": "https://modelscope.cn/api/v1/studios/deploy_schema.json",
"type": "object",
"properties": {
    "sdk_type": {
    "type": "string",
    "enum": ["gradio", "streamlit", "static", "docker"],
    "description": "The application's frontend SDK or deployment mode. \n- **gradio**: Use this when the project uses the gradio framework. Requires an `app.py` in the repository root. Uses a base image and runs directly (no build step required). Requires specifying `sdk_version` and `base_image`. \n- **streamlit**: Use this when the project uses the streamlit framework. Requires an `app.py` in the repository root. Runs directly from a base image (no build step required). Requires specifying `base_image`. \n- **static**: Serves pre-built static files (e.g., HTML, CSS, JS) via Nginx, using the system's default environment. Cannot support projects that require a build step (e.g., Node.js projects). Requires an `index.html` in the repository root. **No build or compilation steps are performed**—files must already be built and committed to the repository. If your frontend requires building (e.g., via `npm run build`), use the `docker` mode instead. Requires specifying `base_image`. \n- **docker**: Builds and runs a custom container from a `Dockerfile` in the repository root. The resulting image must expose the service on `0.0.0.0:7860`. Does not use `sdk_version` or `base_image`; instead, `port` must be exactly `7860`. For projects where you’re unsure which other SDK types to use, `docker` is always recommended."
    },
    "sdk_version": {
    "type": "string",
    "enum": [
        "3.29.0", "3.39.0", "3.47.1", "4.8.0", "4.14.0", "4.19.1", "4.31.3", "4.38.1",
        "4.44.0", "5.3.0", "5.4.0", "5.12.0", "5.20.1", "5.29.0", "5.34.1", "5.42.0",
        "5.49.1", "6.2.0"
    ],
    "default": "6.2.0",
    "description": "Version of Gradio SDK. Required only when sdk_type is 'gradio'. Recommended to use the latest version."
    },
    "resource_configuration": {
    "type": "string",
    "enum": [
        "platform/2v-cpu-16g-mem",
        "xgpu/8v-cpu-32g-mem-16g",
        "xgpu/8v-cpu-64g-mem-48g"
    ],
    "description": "Cloud instance type with predefined resources. The 'platform/2v-cpu-16g-mem' instance is available to all users at no cost. The 'xgpu' instances require eligibility and approval; see https://modelscope.cn/docs/studios/xGPU for details. Note: Resources from personal cloud accounts cannot be configured via this JSON schema. "
    },
    "base_image": {
    "type": "string",
    "enum": [
        "ubuntu20.04-py37-torch1.11.0-tf1.15.5-modelscope1.6.1",
        "ubuntu20.04-py38-torch1.11.0-tf1.15.5-modelscope1.6.1",
        "ubuntu20.04-py38-torch2.0.1-tf1.15.5-modelscope1.8.1",
        "ubuntu20.04-py38-torch2.0.1-tf2.13.0-modelscope1.9.5",
        "ubuntu22.04-py310-torch2.1.0-tf2.14.0-modelscope1.10.0",
        "ubuntu22.04-py310-torch2.1.2-tf2.14.0-modelscope1.13.1",
        "ubuntu22.04-py310-torch2.1.2-tf2.14.0-modelscope1.13.3",
        "ubuntu22.04-py310-torch2.1.2-tf2.14.0-modelscope1.14.0",
        "ubuntu22.04-py310-torch2.3.0-modelscope1.15.0",
        "ubuntu22.04-py310-torch2.3.0-modelscope1.16.1",
        "ubuntu22.04-py310-torch2.3.0-modelscope1.17.1",
        "ubuntu22.04-py310-torch2.3.0-modelscope1.18.0",
        "ubuntu22.04-py310-torch2.3.0-modelscope1.19.2",
        "ubuntu22.04-py310-torch2.3.1-modelscope1.20.0",
        "ubuntu22.04-py310-torch2.3.1-modelscope1.21.0",
        "ubuntu20.04-py310-paddle3.0.0-modelscope1.24.0",
        "ubuntu22.04-py311-torch2.3.1-modelscope1.24.0",
        "ubuntu22.04-py311-torch2.3.1-modelscope1.25.0",
        "ubuntu22.04-cuda12.4.0-py311-torch2.6.0-modelscope1.25.0-LLM",
        "ubuntu22.04-cuda12.4.0-py311-torch2.8.0-modelscope1.31.0-LLM",
        "ubuntu22.04-py311-torch2.3.1-modelscope1.31.0"
    ],
    "default": "ubuntu22.04-py311-torch2.3.1-modelscope1.31.0",
    "description": "Prebuilt runtime environment (Docker base image). Required for 'gradio', 'streamlit', and 'static' deployments. Not used for 'docker' type."
    },
    "environment_variables": {
    "type": "array",
    "items": {
        "type": "object",
        "properties": {
        "name": { "type": "string" },
        "value": { "type": "string" }
        },
        "required": ["name", "value"]
    },
    "description": "List of environment variables to inject at runtime. Please ensure the names and values of the environment variables required for runtime are provided directly here."
    },
    "port": {
    "type": "integer",
    "description": "The port the application listens on. Required only when sdk_type is 'docker', and must be exactly 7860."
    }
},
"required": ["sdk_type", "resource_configuration"],
"allOf": [
    {
    "if": {
        "properties": { "sdk_type": { "const": "gradio" } },
        "required": ["sdk_type"]
    },
    "then": {
        "required": ["sdk_version", "base_image"]
    }
    },
    {
    "if": {
        "properties": { "sdk_type": { "enum": ["streamlit", "static"] } },
        "required": ["sdk_type"]
    },
    "then": {
        "required": ["base_image"]
    }
    },
    {
    "if": {
        "properties": { "sdk_type": { "const": "docker" } },
        "required": ["sdk_type"]
    },
    "then": {
        "not": {
        "required": ["sdk_version"]
        },
        "required": ["port"],
        "properties": {
        "port": {
            "const": 7860
        }
        }
    }
    }
]
}